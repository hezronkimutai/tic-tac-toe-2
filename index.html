<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Play a fun and challenging game of Tic Tac Toe against the computer. Enjoy the classic game with a modern twist!">
    <meta name="keywords" content="Tic Tac Toe, game, online game, play Tic Tac Toe, computer game, classic game">
    <meta name="author" content="Hezron Kimutai">
    <title>Tic Tac Toe Game | Play Online</title>
    <style>
        body {
            background: rgb(3, 19, 27);
            background-size: cover;
            background-repeat: no-repeat;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .home_container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .game_container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
            width: 60%;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 10px;
        }

        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 30%;
            height: 30%;
            min-height: 80px;
            border: 1px solid blue;
            border-radius: 10px;
            margin: 5px;
        }

        .cell img {
            width: 70px;
            height: 70px;
            object-fit: fill;
            border-radius: 10px;
        }

        .header {
            color: blue;
            text-align: center;
        }

        .scores {
            color: white;
            text-align: center;
        }

        .footer {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        .reset-btn {
            border-radius: 10px;
            background: blue;
            color: white;
            padding: 5px 10px;
            border: none;
            margin: 5px;
            cursor: pointer;
        }

        .header {
            display: flex;
            flex-direction: row;
        }

        .header img {
            height: 50px;
            width: 50px;
            margin: auto;
            padding: 0px 5px;
        }
    </style>
    <!-- Open Graph Meta Tags for Social Media Sharing -->
    <meta property="og:title" content="Tic Tac Toe Game | Play Online">
    <meta property="og:description"
        content="Play a fun and challenging game of Tic Tac Toe against the computer. Enjoy the classic game with a modern twist!">
    <meta property="og:image"
        content="https://res.cloudinary.com/hezzie/image/upload/v1720883292/tic-tac-toe_zdpv5z.png">
    <meta property="og:url" content="https://tic-tac-toe-2-zeta.vercel.app/">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Tic Tac Toe Game | Play Online">
    <meta name="twitter:description"
        content="Play a fun and challenging game of Tic Tac Toe against the computer. Enjoy the classic game with a modern twist!">
    <meta name="twitter:image"
        content="https://res.cloudinary.com/hezzie/image/upload/v1720883292/tic-tac-toe_zdpv5z.png">
    <link rel="icon" href="https://res.cloudinary.com/hezzie/image/upload/v1720883292/tic-tac-toe_zdpv5z.png" />

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Tic Tac Toe Game",
            "url": "https://yourwebsite.com/tic-tac-toe",
            "author": {
                "@type": "Person",
                "name": "Hezron Kimutai"
            },
            "description": "Play a fun and challenging game of Tic Tac Toe against the computer. Enjoy the classic game with a modern twist!",
            "image": "https://res.cloudinary.com/hezzie/image/upload/v1720883292/tic-tac-toe_zdpv5z.png"
        }
    </script>
</head>

<body>
    <div class="home_container">
        <div class="header">
            <img src="https://res.cloudinary.com/hezzie/image/upload/v1720883292/tic-tac-toe_zdpv5z.png" />
            <h1 class="header"><a href="https://koafaimoor.net/4/7831749">TIC TAC TOE</a></h1>
        </div>
        <h1 id="winner" class="scores"></h1>
        <div class="game_container">
            <div class="cell" id="11" value="11" onclick="play(this)"></div>
            <div class="cell" id="12" value="12" onclick="play(this)"></div>
            <div class="cell" id="13" value="13" onclick="play(this)"></div>
            <div class="cell" id="21" value="21" onclick="play(this)"></div>
            <div class="cell" id="22" value="22" onclick="play(this)"></div>
            <div class="cell" id="23" value="23" onclick="play(this)"></div>
            <div class="cell" id="31" value="31" onclick="play(this)"></div>
            <div class="cell" id="32" value="32" onclick="play(this)"></div>
            <div class="cell" id="33" value="33" onclick="play(this)"></div>
        </div>
        <div class="footer">
            <button class="reset-btn" onclick="resetGame()">RESET GAME</button>
            <button class="reset-btn" onclick="goBack()">GO BACK</button>
        </div>
    </div>

    <script>
        let playerOne = true;
        let playerOneScores = { x: { 1: [], 2: [], 3: [] }, y: { 1: [], 2: [], 3: [] } };
        let playerTwoScores = { x: { 1: [], 2: [], 3: [] }, y: { 1: [], 2: [], 3: [] } };
        let playerOneWithCenter = false;
        let playerTwoWithCenter = false;
        let idList = [];
        let winner = false;

        const resetInitialVariables = () => {
            playerOne = true;
            playerOneScores = { x: { 1: [], 2: [], 3: [] }, y: { 1: [], 2: [], 3: [] } };
            playerTwoScores = { x: { 1: [], 2: [], 3: [] }, y: { 1: [], 2: [], 3: [] } };
            playerOneWithCenter = false;
            playerTwoWithCenter = false;
            idList = [];
            winner = false;
        };

        const resetGame = () => {
            document.getElementById("winner").innerHTML = "";
            document.querySelectorAll('.cell').forEach(cell => cell.innerHTML = '');
            resetInitialVariables();
        };

        const goBack = () => {
            document.getElementById("winner").innerHTML = "";
            if (idList.length) {
                const removedId = idList.pop();
                const [x, y] = removedId.split('');
                const elementToRemove = document.getElementById(removedId);
                elementToRemove.innerHTML = '';
                if (!playerOne) {
                    playerOneScores.x[x].pop();
                    playerOneScores.y[y].pop();
                    if (x === '2' && y === '2') {
                        playerOneWithCenter = false;
                    }
                } else {
                    playerTwoScores.x[x].pop();
                    playerTwoScores.y[y].pop();
                    if (x === '2' && y === '2') {
                        playerTwoWithCenter = false;
                    }
                }
                playerOne = !playerOne;
            }
        };

        const play = (element) => {
            if (!winner && !element.innerHTML) {
                makeMove(element, 'x');
                if (!winner) {
                    setTimeout(computerMove, 500);
                }
            }
        };

        const makeMove = (element, player) => {
            const [x, y] = element.id.split('');
            element.innerHTML = `<img src="./${player}.png" alt="${player}" class="imgItem" />`;
            idList.push(element.id);
            const scores = player === 'x' ? playerOneScores : playerTwoScores;
            scores.x[x].push(x);
            scores.y[y].push(y);
            if (x === '2' && y === '2') {
                if (player === 'x') playerOneWithCenter = true;
                else playerTwoWithCenter = true;
            }
            checkWinner();
        };

        const computerMove = () => {
            if (winner) return;
            const move = findWinningMove('o') || findWinningMove('x') || findCenterMove() || findCornerMove() || findSideMove();
            if (move) {
                makeMove(move, 'o');
            }
        };

        const findWinningMove = (player) => {
            for (let cell of document.getElementsByClassName('cell')) {
                if (!cell.innerHTML) {
                    cell.innerHTML = `<img src="./${player}.png" alt="${player}" class="imgItem" />`;
                    if (checkWinner()) {
                        cell.innerHTML = '';
                        return cell;
                    }
                    cell.innerHTML = '';
                }
            }
            return null;
        };

        const findCenterMove = () => document.getElementById('22').innerHTML ? null : document.getElementById('22');

        const findCornerMove = () => {
            const corners = ['11', '13', '31', '33'];
            for (let corner of corners) {
                const cell = document.getElementById(corner);
                if (!cell.innerHTML) {
                    return cell;
                }
            }
            return null;
        };

        const findSideMove = () => {
            const sides = ['12', '21', '23', '32'];
            for (let side of sides) {
                const cell = document.getElementById(side);
                if (!cell.innerHTML) {
                    return cell;
                }
            }
            return null;
        };

        const checkWinner = () => {
            const winnerElement = document.getElementById("winner");
            for (let i = 1; i <= 3; i++) {
                if ((playerOneScores.x[i].length >= 3 && new Set(playerOneScores.x[i]).size === 1)
                    || (playerOneScores.y[i].length >= 3 && new Set(playerOneScores.y[i]).size === 1)) {
                    winnerElement.innerHTML = "Player X is the winner";
                    winner = true;
                }
                if ((playerTwoScores.x[i].length >= 3 && new Set(playerTwoScores.x[i]).size === 1)
                    || (playerTwoScores.y[i].length >= 3 && new Set(playerTwoScores.y[i]).size === 1)) {
                    winnerElement.innerHTML = "Player O is the winner";
                    winner = true;
                }
            }
            if (playerOneWithCenter && Object.values(playerOneScores.x).every(arr => arr.length >= 1)
                && Object.values(playerOneScores.y).every(arr => arr.length >= 1)) {
                winnerElement.innerHTML = "Player X is the winner";
                winner = true;
            }
            if (playerTwoWithCenter && Object.values(playerTwoScores.x).every(arr => arr.length >= 1)
                && Object.values(playerTwoScores.y).every(arr => arr.length >= 1)) {
                winnerElement.innerHTML = "Player O is the winner";
                winner = true;
            }
        };
    </script>
</body>

</html>